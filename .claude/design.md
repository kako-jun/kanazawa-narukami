# é‡‘æ²¢ã¯ä»Šæ—¥ã‚‚é³´é›·ï¼ˆãªã‚‹ã‹ã¿ï¼‰- è¨­è¨ˆæ›¸

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ãƒ–ãƒ©ã‚¦ã‚¶ (Client)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  HTML5 (index.html)                 â”‚
â”‚  - DOMæ§‹é€                            â”‚
â”‚  - Canvasè¦ç´                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CSS3 (style.css)                   â”‚
â”‚  - ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°                       â”‚
â”‚  - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³                     â”‚
â”‚  - ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  JavaScript (game.js)               â”‚
â”‚  - KanazawaNarukamiã‚¯ãƒ©ã‚¹           â”‚
â”‚  - ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯                     â”‚
â”‚  - ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†                       â”‚
â”‚  - Canvasæç”»                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹                         â”‚
â”‚  - Google Fonts (Klee One)          â”‚
â”‚  - æ°—è±¡åºAPIï¼ˆäºˆå®šï¼‰                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
kanazawa-narukami/
â”œâ”€â”€ index.html          # ãƒ¡ã‚¤ãƒ³HTML
â”œâ”€â”€ style.css           # ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆ
â”œâ”€â”€ game.js             # ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€ README.md           # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆèª¬æ˜
â”œâ”€â”€ .claude/            # é–‹ç™ºãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ concept.md      # æ§‹æƒ³
â”‚   â”œâ”€â”€ design.md       # è¨­è¨ˆï¼ˆã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”‚   â””â”€â”€ progress.md     # é€²æ—
â””â”€â”€ assets/ (äºˆå®š)
    â”œâ”€â”€ sounds/         # åŠ¹æœéŸ³
    â””â”€â”€ images/         # ç”»åƒãƒªã‚½ãƒ¼ã‚¹
```

## ğŸ¨ UI/UXè¨­è¨ˆ

### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹é€ 
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ã‚¿ã‚¤ãƒˆãƒ«                  â”‚
â”‚   ã€Œé‡‘æ²¢ã¯ä»Šæ—¥ã‚‚é³´é›·ã€             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ã‚¿ã‚¤ãƒãƒ¼â”‚ã‚¹ã‚³ã‚¢  â”‚ãƒ™ãƒƒãƒˆé¡â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚      â”‚              â”‚            â”‚
â”‚      â”‚  ãƒãƒƒãƒ—+ã‚°ãƒªãƒƒãƒ‰ â”‚            â”‚
â”‚      â”‚   (4x4 Canvas) â”‚           â”‚
â”‚      â”‚              â”‚            â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ãƒ™ãƒƒãƒˆé¡é¸æŠ                      â”‚
â”‚  [50] [100] [250] [500]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ãƒ™ãƒƒãƒˆç¢ºå®š] [ã‚¯ãƒªã‚¢]             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ã‚ªãƒƒã‚ºä¸€è¦§                        â”‚
â”‚  A1: x1.2  A2: x1.5  ...         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å±¥æ­´                             â”‚
â”‚  #1 âœ“ A1â†’A1 +120pt              â”‚
â”‚  #2 âœ— B2â†’C3 -100pt              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
```css
/* èƒŒæ™¯ */
--bg-dark: #2c3e50;
--bg-medium: #34495e;
--bg-light: #4a5f7f;

/* ãƒ—ãƒ©ã‚¤ãƒãƒª */
--primary-blue: #3498db;
--primary-dark: #2980b9;

/* ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ */
--accent-yellow: #f39c12;
--accent-green: #27ae60;
--accent-red: #e74c3c;

/* ãƒ†ã‚­ã‚¹ãƒˆ */
--text-light: #ecf0f1;
--text-muted: #95a5a6;

/* é›² */
--cloud-1: rgba(149, 165, 166, 0.3);
--cloud-2: rgba(127, 140, 141, 0.4);
```

### ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
```css
/* 4x4ã‚°ãƒªãƒƒãƒ‰ */
#grid-overlay {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(4, 1fr);
    gap: 5px;
}

/* ã‚»ãƒ«ã‚µã‚¤ã‚º: è‡ªå‹•èª¿æ•´ */
.grid-cell {
    aspect-ratio: 1;
    min-height: 80px;
}
```

## ğŸ”§ æŠ€è¡“ä»•æ§˜

### HTML5
- **ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—**: `<section>`, `<article>`, `<nav>`
- **Canvas API**: ãƒãƒƒãƒ—æç”»ã€ç”»åƒè§£æï¼ˆäºˆå®šï¼‰
- **Dataå±æ€§**: `data-area-id`, `data-amount`
- **ARIAå±æ€§**: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œï¼ˆä»Šå¾Œï¼‰

### CSS3
- **Flexbox**: ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
- **Grid**: ãƒãƒƒãƒ—ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
- **Animation**: é›²ã®ç§»å‹•ã€é›·å…‰ãƒ•ãƒ©ãƒƒã‚·ãƒ¥
- **Transform**: ã‚¿ã‚¤ãƒˆãƒ«ã®å‚¾ãã€ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
- **Transition**: ã‚¹ãƒ ãƒ¼ã‚ºãªUIå¤‰åŒ–
- **Media Query**: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

### JavaScript (ES6+)
- **ã‚¯ãƒ©ã‚¹æ§‹æ–‡**: `KanazawaNarukami`
- **ã‚¢ãƒ­ãƒ¼é–¢æ•°**: ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©
- **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«**: å‹•çš„HTMLç”Ÿæˆ
- **åˆ†å‰²ä»£å…¥**: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ“ä½œ
- **é…åˆ—ãƒ¡ã‚½ãƒƒãƒ‰**: `map`, `filter`, `reduce`, `find`

## ğŸ’» ã‚¯ãƒ©ã‚¹è¨­è¨ˆ

### KanazawaNarukamiã‚¯ãƒ©ã‚¹
```javascript
class KanazawaNarukami {
    // ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
    score: Number                 // ã‚¹ã‚³ã‚¢
    betAmount: Number            // ãƒ™ãƒƒãƒˆé¡
    selectedArea: String         // é¸æŠã‚¨ãƒªã‚¢
    roundTime: Number            // æ®‹ã‚Šæ™‚é–“
    currentRound: Number         // ãƒ©ã‚¦ãƒ³ãƒ‰ç•ªå·
    isRoundActive: Boolean       // ãƒ©ã‚¦ãƒ³ãƒ‰ä¸­ãƒ•ãƒ©ã‚°
    history: Array               // å±¥æ­´
    areas: Array<Area>           // ã‚¨ãƒªã‚¢é…åˆ—
    elements: Object             // DOMè¦ç´ å‚ç…§
    timerInterval: Number        // ã‚¿ã‚¤ãƒãƒ¼ID

    // ãƒ¡ã‚½ãƒƒãƒ‰
    constructor()                // åˆæœŸåŒ–
    init()                       // ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

    // UIé–¢é€£
    setupCanvas()                // CanvasåˆæœŸåŒ–
    createGridCells()            // ã‚°ãƒªãƒƒãƒ‰ç”Ÿæˆ
    setupEventListeners()        // ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
    updateDisplay()              // è¡¨ç¤ºæ›´æ–°

    // ã‚¨ãƒªã‚¢ç®¡ç†
    initializeAreas()            // ã‚¨ãƒªã‚¢åˆæœŸåŒ–
    selectArea(areaId)           // ã‚¨ãƒªã‚¢é¸æŠ
    clearSelection()             // é¸æŠã‚¯ãƒªã‚¢

    // ãƒ™ãƒƒãƒˆé–¢é€£
    setBetAmount(amount)         // ãƒ™ãƒƒãƒˆé¡è¨­å®š
    confirmBet()                 // ãƒ™ãƒƒãƒˆç¢ºå®š

    // ç¢ºç‡ãƒ»ã‚ªãƒƒã‚º
    updateLightningProbabilities()  // ç¢ºç‡æ›´æ–°
    calculateOdds()              // ã‚ªãƒƒã‚ºè¨ˆç®—
    getOdds(areaId)             // ã‚ªãƒƒã‚ºå–å¾—
    displayOdds()               // ã‚ªãƒƒã‚ºè¡¨ç¤º

    // ãƒ©ã‚¦ãƒ³ãƒ‰ç®¡ç†
    startRoundTimer()           // ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹
    updateTimer()               // ã‚¿ã‚¤ãƒãƒ¼æ›´æ–°
    endRound()                  // ãƒ©ã‚¦ãƒ³ãƒ‰çµ‚äº†

    // çµæœåˆ¤å®š
    determineLightningStrike()  // è½é›·ä½ç½®æ±ºå®š
    showResult(isWin, ...)      // çµæœè¡¨ç¤º

    // ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
    triggerLightning()          // é›·å…‰ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
    triggerLightningLoss()      // æš—è»¢ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
    highlightHitArea(areaId)    // ã‚¨ãƒªã‚¢ãƒã‚¤ãƒ©ã‚¤ãƒˆ

    // å±¥æ­´
    addHistory(...)             // å±¥æ­´è¿½åŠ 
    displayHistory()            // å±¥æ­´è¡¨ç¤º

    // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
    updateGridOdds()            // ã‚°ãƒªãƒƒãƒ‰ã‚ªãƒƒã‚ºæ›´æ–°
}
```

### Areaãƒ‡ãƒ¼ã‚¿å‹
```typescript
interface Area {
    id: string;          // "A1" - "D4"
    row: number;         // 0-3
    col: number;         // 0-3
    probability: number; // 0.05-0.25
    odds: number;        // 1.0-4.0
}
```

### HistoryItemãƒ‡ãƒ¼ã‚¿å‹
```typescript
interface HistoryItem {
    round: number;
    isWin: boolean;
    selectedArea: string;
    hitArea: string;
    amount: number;
    timestamp: Date;
}
```

## ğŸ² ç¢ºç‡è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

### Step 1: é›·é›²ã®ä¸­å¿ƒæ±ºå®š
```javascript
const centerRow = Math.floor(Math.random() * 4);
const centerCol = Math.floor(Math.random() * 4);
```

### Step 2: è·é›¢è¨ˆç®—
```javascript
const distance = Math.sqrt(
    Math.pow(area.row - centerRow, 2) +
    Math.pow(area.col - centerCol, 2)
);
```

### Step 3: ç¢ºç‡è¨ˆç®—
```javascript
const baseProbability = 0.25 - (distance * 0.05);
area.probability = Math.max(0.05, Math.min(0.25,
    baseProbability + (Math.random() * 0.05)
));
```

### Step 4: ã‚ªãƒƒã‚ºè¨ˆç®—
```javascript
const rawOdds = (1 / area.probability) * 0.9;
area.odds = Math.round(rawOdds * 10) / 10;
```

### ç¢ºç‡åˆ†å¸ƒä¾‹
```
é›·é›²ä¸­å¿ƒ: B2
è·é›¢0 (B2): ç¢ºç‡ 22-27% â†’ ã‚ªãƒƒã‚º Ã—1.2-1.5
è·é›¢1 (A1,A2,B1,B3,C2): ç¢ºç‡ 17-22% â†’ ã‚ªãƒƒã‚º Ã—1.5-2.0
è·é›¢2: ç¢ºç‡ 12-17% â†’ ã‚ªãƒƒã‚º Ã—2.0-2.7
è·é›¢3ä»¥ä¸Š: ç¢ºç‡ 5-12% â†’ ã‚ªãƒƒã‚º Ã—2.7-4.0
```

## â±ï¸ ã‚¿ã‚¤ãƒãƒ¼è¨­è¨ˆ

### ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¤ãƒãƒ¼
```javascript
// 5åˆ† = 300ç§’
roundTime = 300;

setInterval(() => {
    roundTime--;

    if (roundTime <= 0) {
        endRound();
        roundTime = 300;
    }

    updateTimer();
}, 1000);
```

### è¡¨ç¤ºãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
```javascript
const minutes = Math.floor(roundTime / 60);
const seconds = roundTime % 60;
display = `${minutes}:${seconds.padStart(2, '0')}`;
// ä¾‹: "4:58", "0:03"
```

## ğŸ­ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆ

### é›²ã®ç§»å‹•
```css
@keyframes cloudMove {
    0%, 100% { transform: translateX(0); }
    50% { transform: translateX(-50%); }
}
/* 60ç§’å‘¨æœŸ */
```

### é›·å…‰ãƒ•ãƒ©ãƒƒã‚·ãƒ¥
```css
@keyframes lightning {
    0% { opacity: 0; }
    10% { opacity: 1; }
    20% { opacity: 0; }
    30% { opacity: 1; }
    40% { opacity: 0; }
    100% { opacity: 0; }
}
/* 0.5ç§’ */
```

### ãƒ‘ãƒ«ã‚¹ï¼ˆãƒ’ãƒƒãƒˆã‚¨ãƒªã‚¢ï¼‰
```css
@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}
/* 0.5ç§’ */
```

## ğŸ“Š çŠ¶æ…‹é·ç§»å›³

```
[åˆæœŸçŠ¶æ…‹]
    â†“
[ã‚¨ãƒªã‚¢æœªé¸æŠ]
    â†“ (ã‚¨ãƒªã‚¢ã‚¯ãƒªãƒƒã‚¯)
[ã‚¨ãƒªã‚¢é¸æŠä¸­] â†’ (ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³) â†’ [ã‚¨ãƒªã‚¢æœªé¸æŠ]
    â†“ (ãƒ™ãƒƒãƒˆç¢ºå®š)
[ãƒ™ãƒƒãƒˆç¢ºå®šæ¸ˆã¿]
    â†“ (5åˆ†çµŒé)
[çµæœåˆ¤å®šä¸­]
    â†“
[çµæœè¡¨ç¤º]
    â†“ (3ç§’å¾Œ)
[ã‚¨ãƒªã‚¢æœªé¸æŠ] (æ–°ãƒ©ã‚¦ãƒ³ãƒ‰é–‹å§‹)
```

## ğŸ” ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ï¼ˆä»Šå¾Œï¼‰

### LocalStorageè¨­è¨ˆ
```javascript
// ä¿å­˜ãƒ‡ãƒ¼ã‚¿
{
    highScore: Number,
    totalRounds: Number,
    totalWins: Number,
    totalLosses: Number,
    history: Array<HistoryItem>,
    settings: {
        soundEnabled: Boolean,
        volume: Number
    }
}

// ä¿å­˜ã‚¿ã‚¤ãƒŸãƒ³ã‚°
- ãƒ©ã‚¦ãƒ³ãƒ‰çµ‚äº†æ™‚
- ã‚¹ã‚³ã‚¢æ›´æ–°æ™‚
- è¨­å®šå¤‰æ›´æ™‚
```

## ğŸŒ æ°—è±¡åºãƒ‡ãƒ¼ã‚¿çµ±åˆè¨­è¨ˆï¼ˆPhase 2ï¼‰

### ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ•ãƒ­ãƒ¼
```
1. æ°—è±¡åºã€Œé›·ãƒŠã‚¦ã‚­ãƒ£ã‚¹ãƒˆã€URLã«ã‚¢ã‚¯ã‚»ã‚¹
   â†“
2. ç”»åƒãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆPNGå½¢å¼ï¼‰
   â†“
3. Canvasã«èª­ã¿è¾¼ã¿
   â†“
4. ãƒ”ã‚¯ã‚»ãƒ«ãƒ‡ãƒ¼ã‚¿è§£æ
   â†“
5. é›·æ´»å‹•åº¦ã‚’ãƒãƒƒãƒ”ãƒ³ã‚°
   â†“
6. 16ã‚¨ãƒªã‚¢ã«å¤‰æ›
   â†“
7. ç¢ºç‡è¨ˆç®—
   â†“
8. ã‚ªãƒƒã‚ºæ›´æ–°
```

### Canvasç”»åƒè§£æ
```javascript
async function analyzeLightningData(imageUrl) {
    // ç”»åƒèª­ã¿è¾¼ã¿
    const img = new Image();
    img.crossOrigin = 'anonymous';
    img.src = imageUrl;

    await img.decode();

    // Canvasæç”»
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = img.width;
    canvas.height = img.height;
    ctx.drawImage(img, 0, 0);

    // ãƒ”ã‚¯ã‚»ãƒ«ãƒ‡ãƒ¼ã‚¿å–å¾—
    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    const data = imageData.data;

    // 16ã‚¨ãƒªã‚¢ã«åˆ†å‰²ã—ã¦è§£æ
    const areas = divideIntoAreas(data, canvas.width, canvas.height);

    // é›·æ´»å‹•åº¦ã‚’ç¢ºç‡ã«å¤‰æ›
    return calculateProbabilities(areas);
}
```

## ğŸ”Š ã‚µã‚¦ãƒ³ãƒ‰è¨­è¨ˆï¼ˆPhase 3ï¼‰

### Web Audio API
```javascript
class SoundManager {
    constructor() {
        this.audioContext = new AudioContext();
        this.sounds = {};
    }

    loadSound(name, url) {
        // éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
    }

    playSound(name, volume = 1.0) {
        // éŸ³å£°å†ç”Ÿ
    }

    playThunder() {
        // é›·éŸ³å†ç”Ÿï¼ˆå‘¨æ³¢æ•°å¤‰èª¿ã§ç”Ÿæˆï¼‰
    }
}
```

### åŠ¹æœéŸ³ãƒªã‚¹ãƒˆ
- `thunder.mp3`: é›·é³´
- `bet.mp3`: ãƒ™ãƒƒãƒˆç¢ºå®šéŸ³
- `win.mp3`: çš„ä¸­éŸ³
- `lose.mp3`: å¤–ã‚ŒéŸ³
- `ambient.mp3`: ç’°å¢ƒéŸ³ï¼ˆãƒ«ãƒ¼ãƒ—ï¼‰

## ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–è¨­è¨ˆ

### ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆ
```css
/* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ */
@media (min-width: 769px) {
    .title { font-size: 3.5rem; }
    #grid-overlay {
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(4, 1fr);
    }
}

/* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ */
@media (max-width: 768px) and (min-width: 481px) {
    .title { font-size: 2.5rem; }
    .game-info { flex-direction: column; }
}

/* ãƒ¢ãƒã‚¤ãƒ« */
@media (max-width: 480px) {
    .title { font-size: 2rem; }
    #grid-overlay {
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(5, 1fr);
    }
}
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¨­è¨ˆï¼ˆä»Šå¾Œï¼‰

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
```javascript
// game.test.js
describe('KanazawaNarukami', () => {
    test('ç¢ºç‡è¨ˆç®—ãŒæ­£ã—ã„ç¯„å›²å†…', () => {
        // å…¨ã‚¨ãƒªã‚¢ã®ç¢ºç‡åˆè¨ˆãŒ1.0ã«è¿‘ã„
    });

    test('ã‚ªãƒƒã‚ºè¨ˆç®—ãŒæ­£ã—ã„', () => {
        // ã‚ªãƒƒã‚º = (1/ç¢ºç‡) * 0.9
    });

    test('ã‚¹ã‚³ã‚¢è¨ˆç®—ãŒæ­£ã—ã„', () => {
        // çš„ä¸­æ™‚: ã‚¹ã‚³ã‚¢ += ãƒ™ãƒƒãƒˆé¡ * ã‚ªãƒƒã‚º
        // å¤–ã‚Œæ™‚: ã‚¹ã‚³ã‚¢ -= ãƒ™ãƒƒãƒˆé¡
    });
});
```

## âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ç›®æ¨™
- åˆæœŸãƒ­ãƒ¼ãƒ‰: < 2ç§’
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³å¿œç­”: < 100ms
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: 60 FPS

### æœ€é©åŒ–æ‰‹æ³•
1. **CSSæœ€å°åŒ–**: æœ¬ç•ªãƒ“ãƒ«ãƒ‰æ™‚
2. **JSæœ€å°åŒ–**: UglifyJS/Terser
3. **ç”»åƒæœ€é©åŒ–**: WebPå½¢å¼ã€é…å»¶èª­ã¿è¾¼ã¿
4. **ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°**: Service Workerï¼ˆPWAåŒ–ï¼‰
5. **CDNä½¿ç”¨**: å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

### XSSå¯¾ç­–
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚ºï¼ˆä»Šå¾Œï¼‰
- `innerHTML`ä½¿ç”¨æ™‚ã®æ³¨æ„

### CORSå¯¾ç­–
- æ°—è±¡åºãƒ‡ãƒ¼ã‚¿å–å¾—æ™‚ã®CORSè¨­å®š
- ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼çµŒç”±ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

## ğŸ“ˆ ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

### å°†æ¥ã®æ‹¡å¼µæ€§
1. **è¤‡æ•°éƒ½å¸‚å¯¾å¿œ**: éƒ½å¸‚ãƒ‡ãƒ¼ã‚¿ã®æŠ½è±¡åŒ–
2. **ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤**: WebSocketé€šä¿¡
3. **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¿½åŠ **: Node.js + Express
4. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Firebase/Supabase
5. **èªè¨¼**: OAuth 2.0

---

**æ›´æ–°æ—¥**: 2025-11-17
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
**ãƒ¬ãƒ“ãƒ¥ãƒ¼çŠ¶æ…‹**: è¨­è¨ˆå®Œäº†ã€å®Ÿè£…å®Œäº†
